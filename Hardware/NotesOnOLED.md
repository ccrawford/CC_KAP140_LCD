The OLED display used in this project is a monochrome, 3.12" display with 256x64 resolution.

# Purchasing
You can find these on the usual online stores (Amazon, AliExpress, Ebay). Searching for "OLED 3.12" will usually pull up a lot of examples. They are about $15-18 on Ali, $20-30 on the other places. If you find one suspiciously inexpensive, (under $10) double check to see that it includes the interface board. 

**Do NOT buy one that shows a hanging ribbon connector.**</br>
![NOT THIS ONE](/Photos/WRONG%20TYPE.png)

</br>
**Do buy one with the 16 pin header and the configurable interface**

[This one](https://www.aliexpress.us/item/3256805799056965.html)

![This one](/Photos/THIS%20ONE.png)

### Color
They come in four, monochrome colors. The color is up to you, but I use white and the put some red-orange transparency film on it to make it "LED Orange".  Oracal 8300 film, color 033 works well. Google "Oracal 8300 033". It's about $2/sheet, but shipping costs will suggest buying a few other colors at the same time. Get some reds and greys. I like the light greys on top of 7-segment displays to make them look cleaner. 

# Configuring the display interface
One important note: These devices support different interfaces by moving jumpers which are 0 ohm, SMD resistors on the board. They typically come with the resistors in the 80xx configuration. On the board in the image, look at the silkscreened table on the device. What we want to use is the 4-wire SPI interface (4SPI).

We need to have resistors R5 and R8. However right now we have R6 and R8. So, take your soldering iron and remove R6 and move it to R5. I recommend using a soldering iron, not a hot air rework station. If you lose the 0 Ohm resistor when you desolder it from R6, you can bridge R5 with a nice blob of solder. Either will work. Inspect your work and make sure R8 is still in place. A continuity meter is helpful here. **If you don't have this set properly, your screen will not work!**

</br><em>Interface configuration table circled in red, jumper location in yellow. If you look closely, you can see this one configured for 80xx. We want 4SPI</em></br>
![Interface Jumpers](/Photos/InterfaceJumpers.jpg)

# Conencting the display to the RP2040

## TL;DR: 

| RP2040 | OLED | Comment |
|--------|------|---------|
| 18 | D0: Pin4 | SCK/Clock |
| 19 | D1: Pin5 | Data (MOSI) |
| 17 (arbitrary) | 16 | CS |
| 20 (arbitrary) | 14 | DC |
| 21 (arbitrary) | 15 | Reset |
| GND | 1 | Ground |
| VBUS | 2 | 5v |

### Side note on channels
The four wires in 4-wire SPI (Serial Peripheral Interface) are:

MOSI (Master Out Slave In) - Data sent from the master device to the slave device
MISO (Master In Slave Out) - Data sent from the slave device to the master device (Not used here)
SCLK (Serial Clock) - The clock signal generated by the master to synchronize data transmission
SS/CS (Slave Select/Chip Select) - Signal used by the master to select which slave device to communicate with

These four lines create a full-duplex communication channel, allowing simultaneous bidirectional data transfer between devices. The master device controls the clock and selects which slave to communicate with, while data flows in both directions on separate lines. However for our interface, there is no display-out communication.

DC and RESET are not part of the standard 4-wire SPI interface - they're additional control lines often used with specific peripheral devices, particularly displays:

DC (Data/Command) - This line indicates whether the data being sent on the MOSI line should be interpreted as a command (DC=0) or as display data (DC=1). It's commonly used with display controllers like those in LCD or OLED screens to differentiate between commands (like "set cursor position") and actual pixel data.
RESET - This is a hardware reset line used to initialize or restart the peripheral device. Pulling this line low (active-low) forces the device to return to its initial state. This is useful during power-up sequences or when recovering from error conditions.

## The RP2040 interface

Now that we have it configured for 4-wire SPI let's get it wired to the RP2040. We are using SPI0 on the RP2040. While the library supports software SPI with user selectable pins, the screen refresh rate is much too slow. 

The default hardware SPI pins for SPI0 are:
    - SCK (Clock): GPIO 18
    - MOSI (Data Out): GPIO 19
    - MISO (Data In, not used here)
    - Chip Select (CS) Any GPIO you assign (we will use 17)
  These two aren't part of 4-wire SPI, but are needed by the display.
    - Data/Command (DC):  (We will use 14)
    - Reset: Any GPIO you assign. (We will use 21)




## The OLED interface

On the OLED the resistors mentioned above specify how the pins are to be used. Study the pin numbering on the header. They start with 1 on the bottom right and go up to 16 on the upper left. It's easy to get them mixed up!

Here is the info from the manufacturer:

| Pin No. | Symbol |
|---------|--------|
| 1       | VSS/GND |
| 2       | VCC-IN |
| 3       | NC     |
| 4       | D0/CLK |
| 5       | D1/DIN |
| 6       | D2     |
| 7       | D3     |
| 8       | D4     |
| 9       | D5     |
| 10      | D6     |
| 11      | D7     |
| 12      | E/RD#  |
| 13      | R/W#   |
| 14      | D/C#   |
| 15      | RES#   |
| 16      | CS#    |

And same info with more detail.

| Pin No. | Symbol | I/O | Function |
|---------|--------|-----|----------|
| 1 | Vss | P | Ground of Logic Circuit<br>This is a ground pin. It also acts as a reference for the logic pins. It must be connected to external ground. |
| 2 | VBAT | 3...5V | Power Supply for Display Module Circuit<br>This is a voltage supply pin. It connected to external source. |
| 3 | NC | - | Please let it Float. |
| 4--11 | DB0â€”DB7 | I/O | Host Data Input/Output Bus<br>These pins are 8-bit bi-directional data bus to be connected to the microprocessor's data bus. When serial mode is selected, D1 will be the serial data input SDIN and D0 will be the serial clock input SCLK. |
| 12 | /RD | I | Read/Write Enable or Read<br>This pin is MCU interface input. When interfacing to an 68XX-series microprocessor, this pin will be used as the Enable(E) signal. Read/Write operation is initiated when this pin is pulled high and the CS is pulled low. When connecting to an 80XX-microprocessor,this pin receives the Read(RD) signal. Data read operation is initiated when this pin is pulled low CS is pulled low. |
| 13 | /WR | I | Read/Write Select or Write<br>This pin is MCU interface input. When interfacing to an 68XX-series microprocessor, this pin will be used as Read/Write (R/W) selection input. Pull this pin to "High" for read mode and pull it to "Low" for write mode. When 80XX interface mode is selected, this pin will be the Write (WR) input. Data write operation is initiated when this pin is pulled low and the CS is pulled low. |
| 14 | /DC | I | Data/Command Control<br>This pin is Data/Command control pin. When the pin is pulled high, the input at D7~D0 is treated as display data. When the pin is pulled low, the input at D7~D0 will be transferred to the command register. For detail relationship to MCU interface signals, please refer to the Timing Characteristics Diagrams. |
| 15 | /Reset | I | Power Reset for Controller and Driver<br>This pin is reset signal input. When the pin is low, initialization of the chip is executed. |
| 16 | /CS | I | Chip Select<br>This pin is the chip select input. The chip is enabled for MCU communication only when CS# is pulled low. |

## Note on power
It's probably not best practice to run the display off of the microcontroller power supply. I use "VBUS", which is connected to the USB power supply. I've measured current draw of the completed rp2040/oled device at 200mA when on and 30mA with display off. This is well within the 500mA baseline for a USB connection, but if you have an unpowered hub with multiple devices trying to pull 200 each, it's possible that the hub will be insufficient to power everything.

If you are running this setup off of an unpowered or underpowered hub (which is fairly common for sim-pits) and the display doesn't light or rp2040 doesn't show up, try connecting to a powered hub or on a hub where this is the only device plugged in. I always recommend running home-built USB devices on a hub, not on your PC/laptop's ports as a little protection against shorts or back-fed power. Not pefect, but a little insurance.

## Physical connections
I use 26 awg silicone multi-strand wire. About 10cm long. I then upload a quick test program to the RP2040 to make sure everything is working before wiring and building any more. You will need to remove the pin headers as well. You can use dupont wires (and that might be a good idea when you're testing things) but they will 100% work themselves free and cause problems if you try to use them in the final product. Unsolder the headers, clean up the old solder, then tin the wires and solder directly to the board. Note that the wires should enter from the component side of the display (so your soldering iron is working on the side where you cannot see the pin numbers. I've messed that up a couple times!)
</br><em>I need a better picture, but here you can see the wires going into the back of the display</em>
![Wiring](/Photos/IMG_3212.JPEG)</br>

# Summary
Ok, so end of the day, here's how we will run the wires:

| RP2040 | OLED | Comment |
|--------|------|---------|
| 18 | D0: Pin4 | SCK/Clock |
| 19 | D1: Pin5 | Data (MOSI/MISO) |
| 17 (arbitrary) | 16 | CS |
| 20 (arbitrary) | 14 | DC |
| 21 (arbitrary) | 15 | Reset |
| GND | 1 | Ground |
| VBUS | 2 | 5v |


